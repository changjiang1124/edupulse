<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Notice - {{ course.name }}</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header.late {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        .header.early-leave {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        }
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 16px;
            opacity: 0.9;
        }
        .content {
            padding: 40px 30px;
        }
        .greeting {
            font-size: 18px;
            margin-bottom: 20px;
            color: #dc2626;
        }
        .greeting.late {
            color: #f59e0b;
        }
        .greeting.early-leave {
            color: #6366f1;
        }
        .attendance-summary {
            background-color: #fef2f2;
            border: 1px solid #dc2626;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
            text-align: center;
        }
        .attendance-summary.late {
            background-color: #fef3c7;
            border-color: #f59e0b;
        }
        .attendance-summary.early-leave {
            background-color: #eef2ff;
            border-color: #6366f1;
        }
        .status-badge {
            display: inline-block;
            background-color: #dc2626;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 16px;
            margin: 10px 0;
        }
        .status-badge.late {
            background-color: #f59e0b;
        }
        .status-badge.early-leave {
            background-color: #6366f1;
        }
        .class-details {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }
        .class-details h3 {
            margin: 0 0 20px 0;
            color: #2563eb;
            font-size: 20px;
        }
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        .detail-label {
            font-weight: 600;
            color: #475569;
        }
        .detail-value {
            color: #64748b;
        }
        .info-section {
            background-color: #f0f9ff;
            border: 1px solid #0284c7;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }
        .info-section h4 {
            margin: 0 0 15px 0;
            color: #0369a1;
            font-size: 18px;
        }
        .info-section p {
            margin: 10px 0;
            color: #075985;
        }
        .contact-info {
            background-color: #f1f5f9;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            text-align: center;
        }
        .contact-info h4 {
            margin: 0 0 15px 0;
            color: #475569;
        }
        .contact-details {
            color: #64748b;
        }
        .footer {
            background-color: #f8fafc;
            padding: 30px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            color: #64748b;
            font-size: 14px;
        }
        .footer a {
            color: #2563eb;
            text-decoration: none;
        }
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                border-radius: 0;
            }
            .content {
                padding: 30px 20px;
            }
            .header {
                padding: 25px 20px;
            }
            .detail-row {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header {% if attendance.status == 'late' %}late{% elif attendance.status == 'early_leave' %}early-leave{% endif %}">
            <h1>Attendance Notice</h1>
            <p>{{ class.course.name }}</p>
        </div>
        
        <div class="content">
            <div class="greeting {% if attendance.status == 'late' %}late{% elif attendance.status == 'early_leave' %}early-leave{% endif %}">
                Dear {{ recipient_name }},
            </div>
            
            <p>We wanted to inform you about {{ student.first_name }}'s attendance for today's class.</p>
            
            <div class="attendance-summary {% if attendance.status == 'late' %}late{% elif attendance.status == 'early_leave' %}early-leave{% endif %}">
                <h3>Attendance Status</h3>
                <div class="status-badge {% if attendance.status == 'late' %}late{% elif attendance.status == 'early_leave' %}early-leave{% endif %}">
                    {{ status_display }}
                </div>
                {% if attendance.time_recorded %}
                <p>Time Recorded: {{ attendance.time_recorded|time:"g:i A" }}</p>
                {% endif %}
            </div>
            
            <div class="class-details">
                <h3>Class Information</h3>
                <div class="detail-row">
                    <span class="detail-label">Course:</span>
                    <span class="detail-value">{{ class.course.name }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Date:</span>
                    <span class="detail-value">{{ class.date|date:"d F Y" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Time:</span>
                    <span class="detail-value">{{ class.start_time|time:"g:i A" }}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Instructor:</span>
                    <span class="detail-value">{{ class.teacher.get_full_name }}</span>
                </div>
                {% if class.facility %}
                <div class="detail-row">
                    <span class="detail-label">Location:</span>
                    <span class="detail-value">{{ class.facility.name }}</span>
                </div>
                {% endif %}
            </div>
            
            {% if attendance.status == 'absent' %}
            <div class="info-section">
                <h4>About Today's Absence</h4>
                <p>{{ student.first_name }} was marked as absent from today's class. If this was due to illness or an emergency, please let us know so we can arrange any necessary catch-up sessions or provide class materials.</p>
                <p>We understand that unexpected circumstances can arise, and we're here to support {{ student.first_name }}'s continued learning.</p>
            </div>
            {% elif attendance.status == 'late' %}
            <div class="info-section">
                <h4>Late Arrival</h4>
                <p>{{ student.first_name }} arrived late to today's class. While we understand that delays can happen, arriving on time helps ensure {{ student.first_name }} doesn't miss important instructions and can fully participate in the activities.</p>
                <p>If you're experiencing ongoing challenges with punctuality, please let us know how we can help.</p>
            </div>
            {% elif attendance.status == 'early_leave' %}
            <div class="info-section">
                <h4>Early Departure</h4>
                <p>{{ student.first_name }} left class early today. If this was planned, thank you for letting us know. If not, we wanted to make sure everything is okay.</p>
                <p>We can provide information about any activities or instructions {{ student.first_name }} may have missed.</p>
            </div>
            {% endif %}
            
            <p>Regular attendance helps students get the most from their art education and maintain momentum in their creative development. If you have any concerns or questions about attendance, please don't hesitate to reach out to us.</p>
            
            <div class="contact-info">
                <h4>Questions or Concerns?</h4>
                <div class="contact-details">
                    <p><strong>Email:</strong> {{ contact_email }}</p>
                    <p><strong>Phone:</strong> {{ contact_phone }}</p>
                </div>
            </div>
            
            <p style="text-align: center; font-style: italic; color: #6b7280; margin-top: 30px;">
                We appreciate your partnership in {{ student.first_name }}'s artistic journey.
            </p>
        </div>
        
        <div class="footer">
            <p>This attendance notice was sent to {{ recipient_email }} for {{ student.first_name }}'s class at Perth Art School.</p>
            <p>Â© 2025 Perth Art School. All rights reserved.</p>
            <p><a href="https://{{ site_domain }}">Visit our website</a> | <a href="mailto:{{ contact_email }}">Contact us</a></p>
        </div>
    </div>
</body>
</html>