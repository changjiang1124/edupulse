# EduPulse 項目實施計劃

## 項目概述

EduPulse 是一個基於 Django 的藝術學校管理系統，用於替代 Perth Art School 當前的 WordPress + WooCommerce 系統，主要處理課程管理和學生註冊功能。

## 技術架構

### 後端技術棧
- **框架**: Django 5.2.5
- **資料庫**: SQLite (開發環境)
- **認證**: 自定義 Staff 用戶模型
- **郵件服務**: Amazon SES
- **簡訊服務**: Twilio
- **環境變量**: python-dotenv

### 前端技術棧  
- **CSS 框架**: Bootstrap 5
- **JavaScript**: jQuery 3.6+
- **樣式**: 現代化簡約設計，統一色彩方案
- **代碼組織**: 分離的 CSS/JS 文件，避免內聯代碼

### 部署環境
- **域名**: https://edupulse.perthartschool.com.au/
- **支付**: 銀行轉帳/線下支付 (避免支付網關費用)

## MVP 階段實施計劃

### 第一階段：項目基礎搭建 ✅ 已完成

#### 1.1 環境設置
- [x] 創建 Django 項目和核心應用
- [x] 配置 settings.py 
- [x] 設置靜態文件處理
- [x] 配置 URL 路由

#### 1.2 前端框架配置  
- [x] 集成 Bootstrap 5
- [x] 實現現代化簡約設計主題
- [x] 配置 jQuery 庫
- [x] 創建基礎模板結構 (base.html)
- [x] 實現響應式導航欄

### 第二階段：資料庫設計與模型 ✅ 已完成

#### 2.1 核心資料模型
- [x] **設施模型**: Facility  
- [x] **教室模型**: Classroom
- [x] **員工模型**: Staff (擴展 AbstractUser)
- [x] **學生模型**: Student (包含監護人信息)

#### 2.2 課程管理模型
- [x] **課程模型**: Course (包含 description, short_description)
- [x] **班級模型**: Class (1:n 關係與 Course)
- [x] **註冊模型**: Enrollment
- [x] **考勤模型**: Attendance
- [x] **打卡模型**: ClockInOut

#### 2.3 通信模型
- [x] **郵件記錄模型**: EmailLog
- [x] **簡訊記錄模型**: SMSLog

### 第三階段：課程管理系統 ✅ 已完成

#### 3.1 課程與班級關係
- [x] 實現 Course 與 Class 的 1:n 關係
- [x] Course 模型包含 description 和 short_description 字段
- [x] 班級可根據課程排程自動生成 (支持重複模式)

#### 3.2 課程管理界面
- [x] 課程列表頁面 (core/courses/list.html)
- [x] 課程添加/編輯表單 (core/courses/form.html) 
- [x] 課程詳情頁面 (core/courses/detail.html)
- [x] 所有課程相關 URL 和視圖已配置

#### 3.3 導航和用戶界面
- [x] 修復導航選單中的課程鏈接
- [x] 實現現代化簡約設計
- [x] 移除多餘圖標，保持界面簡潔
- [x] 統一顏色方案和現代化樣式

### 第四階段：用戶管理與權限 ✅ 已完成

#### 4.1 員工管理系統
- [x] 員工信息管理界面
- [x] 角色權限控制 (管理員/教師)  
- [x] 員工狀態管理
- [x] 員工表單 Bootstrap 樣式優化

#### 4.2 學生管理系統
- [x] 學生信息 CRUD 操作
- [x] 監護人信息管理
- [x] 學生狀態管理
- [x] 學生表單 Bootstrap 樣式優化
- [x] 學生列表頁面，支持搜索功能
- [x] 學生詳情頁面，顯示註冊和出勤記錄

#### 4.3 設施與教室管理
- [x] 設施（Facility）管理系統
- [x] 教室（Classroom）管理系統，1:n 關係與設施
- [x] 教室 CRUD 操作和導航菜單整合
- [x] 教室狀態管理和篩選功能
- [x] **修復**: 教室創建表單 is_active 字段顯示問題

#### 4.4 儀表板功能
- [x] 管理員儀表板視圖
- [x] 統計資料顯示
- [x] 近期課程和註冊信息

#### 4.5 表單系統優化 ✅ 已完成
- [x] **Django 表單類創建**: 所有模型的自定義表單類，包含 Bootstrap CSS 類
- [x] **Bootstrap 樣式集成**: 完整的 Bootstrap 5 樣式支持和對齊
- [x] **表單驗證增強**: 改進的錯誤顯示和驗證反饋
- [x] **一致的表單佈局**: 統一的表單設計和用戶體驗
- [x] **響應式設計**: 所有表單在移動設備上正確顯示
- [x] **CSS 增強**: 完善的表單樣式，包括焦點狀態、驗證狀態等
- [x] **所有模組表單模板**: 課程、學生、員工、設施、教室表單模板已完成

#### 4.6 富文本編輯器系統 ✅ 已完成
- [x] **TinyMCE 集成**: 替換 CKEditor，使用自托管方案避免 API 金鑰需求
- [x] **圖片上傳功能**: 安全的圖片上傳，支持課程描述圖片插入
- [x] **WordPress 兼容**: 簡化工具欄，確保與 WordPress/WooCommerce 同步兼容
- [x] **安全驗證**: 文件類型和大小限制，UUID 命名防止衝突
- [x] **檔案組織**: 按日期組織的目錄結構 (YYYY/MM)

### 第五階段：註冊與考勤系統 📋 待開始

#### 5.1 註冊系統
- [ ] 在線註冊表單
- [ ] 註冊狀態管理
- [ ] 註冊來源跟蹤
- [ ] 自動確認郵件

#### 5.2 考勤管理
- [ ] 教師考勤錄入界面
- [ ] 學生出勤狀態記錄
- [ ] 考勤報表生成
- [ ] 缺勤自動通知

#### 5.3 打卡系統
- [ ] GPS 位置驗證
- [ ] 上下班打卡記錄
- [ ] 工時統計和導出功能

### 第六階段：通知系統 📧 待開始

#### 6.1 郵件服務
- [ ] Amazon SES 郵件服務集成
- [ ] 自動化郵件模板
- [ ] 郵件日志記錄

#### 6.2 簡訊服務
- [ ] Twilio 簡訊服務集成  
- [ ] 簡訊通知模板
- [ ] 簡訊日志記錄

### 第七階段：WooCommerce 集成 🔗 待開始

#### 7.1 API 集成
- [ ] 課程信息同步 API
- [ ] 註冊狀態同步
- [ ] 雙向數據同步機制
- [ ] 錯誤處理和重試機制

#### 7.2 外部集成
- [ ] 支付狀態回調處理
- [ ] 網站重定向配置
- [ ] 數據一致性檢查

### 第八階段：系統優化與部署 🚀 待開始

#### 8.1 測試與優化
- [ ] 系統測試
- [ ] 性能優化
- [ ] 安全檢查

#### 8.2 生產部署
- [ ] 服務器環境配置
- [ ] SSL 證書配置
- [ ] 數據備份策略

## 當前進度總結 📊

### ✅ 已完成的功能
1. **基础架构**: Django 项目设置、数据库模型设计
2. **用户界面**: 现代化简约设计、统一色彩方案
3. **课程管理**: 完整的课程 CRUD 操作，支持 TinyMCE 富文本编辑
4. **用户管理**: 员工和学生管理系统，包含详细信息页面
5. **设施管理**: 设施与教室管理，1:n 关系实现
6. **数据模型**: 完整的学校管理系统数据结构
7. **表单系统**: Bootstrap 5 集成、一致的表单样式
8. **富文本编辑器**: TinyMCE 自托管方案，支持图片上传
9. **问题修复**: 教室创建表单状态字段显示问题已解决

### 🔄 下一步重点任务
1. **注册系统**: 实现在线注册表单和流程
2. **考勤功能**: 开发考勤记录和管理功能  
3. **通知系统**: 集成邮件和简讯服务
4. **WooCommerce 同步**: 建立与现有网站的数据同步

### 📋 技术债务和改进计划
1. ~~需要创建更多模板文件 (学生、员工管理页面)~~ ✅ 已完成
2. ~~添加表单验证和错误处理~~ ✅ 已完成
3. ~~实现统一的 Bootstrap 表单样式~~ ✅ 已完成
4. ~~Course 描述字段添加富文本编辑器支持~~ ✅ 已完成
5. 实现数据分页和搜索功能
6. 添加单元测试
7. 创建缺失的列表和详情页面模板
8. 考虑升级到 CKEditor 5 以解决安全问题

## 開發標準

### 代碼質量
- 遵循 Django 最佳實踐
- 澳洲英語界面，中文註釋
- 模組化和可維護性
- 避免內聯 CSS/JS

### 設計原則
- 現代化簡約設計
- 統一色彩方案 (主色: #2563eb)
- 最少化圖標使用
- 專業的藝術學校管理系統外觀

---

*最後更新時間: 2025-08-29*
*版本: v2.0*
*當前階段: 課程管理系統已完成，註冊系統開發中*